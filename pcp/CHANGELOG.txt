# Changelog
This file will document and keep track of changes with each push to the master branch.

Put most recent commits at the top please!

2018-12-27 17:30 [PB] ==================

- Included a roachInterface object in lib_fpga to handle all of the interactions with the ppc and fpga.
The code is similar to the kidPy implementation, with a couple of small tweaks.
    - tidied up upload_fpg function to now check if a running firmware is identical to the one being uploaded
    - sensible renaming of functions (freqComb --> gen_waveform_from_freqs)
    - simplified functionality of gen_waveform_from_freqs (prev freqComb in kidpy). It now doesn't include the
    option to account for a transfer function. This should all be handled in the object ToneList.
    - implemented code to write tones (same workflow as kidPy). Code has been checked with hardware and runs
without errors. Need now to confirm that the results remain consistent with kidPy.

- Renamed roach_interface.py --> mux_channel.py and roachInterface class --> muxChannel so as not to confuse
the roachInterface now defined in lib/lib_fpga.

- Modified muxChannel to use the new roachInterface object.

- [CONFIG FILE CHANGE] Added a firmware_file parameter to each roach entry

- Fixed the AttributeError when muxChannel.shutdown() was called when a dirfile wasn't yet set

commit 2d4a259596e2c836f65e70b77174b004c8551a44 ==================
Author: sr-cdf <rowes@cardiff.ac.uk>
Date:   Thu Dec 13 15:45:48 2018 +0000

    finished synth devices and sources for independent control of single/multi port synths.

    Using Thomas's updated windfreaksynth_v2 we now have separate classes for synthesiser hardware devices and synthesiser sources for muscat.
    The lib_hardware.intiialise_connected_synths function returns a dict of the synth *sources* relating to the devices and their channels as
    named in the hardware_config.cfg and roach_config.cfg files, and no manual source switching is required. This did require adding synth devices
    and synth sources for all synths in the synthclasses submodule, including the dummy synth but should be fully backwards compatible with rest
    of the PCP code.


2018-12-11 14:14 [SR] ==================

Synth stuff:
- Set up synth instantiation based on physical devices (dummy synth is still physical)
- Multi-source synths now share a common instance
- Windfreak set up to use CLK on channel0 and LO on channel1 (muscat requirement)
- RoachInterface now sets the CLK source to 512 Mhz before loading any firmware

FPGA stuff:
- RoachInterface uploads firmware if the currently running firmware does not match.
- RoachInterface performs QDR calibration only when uploading firmware
- QDR calibration actually runs now.
- libFPGA.configure_downlink_registers now converts ip_addr strings to integers


2018-12-07 13:30 [PB] ==================

- Added this file.


2018-12-07 12:30 [PB] ==================

- Removed device_id field in the network_config file, that is what the field names (i.e. network_config.keys()) are for…
	- if there is a good reason to keep it, let me know and i’ll add it back in (edited)

- Added a maxchannels field for each roach to the roach_config file to retain flexibility
	- Modified the configuration verification accordingly
